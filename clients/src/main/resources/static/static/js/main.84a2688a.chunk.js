(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),o=n.n(c),r=n(11),s=n.n(r),i=(n(115),n(12)),l=n(46),d=n(21),u=(n.p,n(4)),j=(n(116),n(244)),b=n(15),h=n(259),p=n(67),f=n.n(p),m=n(93),g=n.n(m),x=n(94),O=n.n(x),v=n(91),y=n.n(v),S=n(258),C=n(256),w=n(262),N=n(257),k=n(69),T=n(261),E=n(54),A=n(92),I=n.n(A),F=n(246),P=n(200),G=n(249),R=n(248),D=n(266),Y=n(35),W=n.n(Y),B=n(59),J=n.n(B),L=n(50),H=n.n(L),M=n(23),U=n.n(M),q=n(45);function z(){return console.log("getServer",window.location.href),window.location.href.indexOf("3000")>-1?"http://localhost:10050/":(console.log("getServer returning",window.location.href),window.location.href)}var K=function(){var e=Object(q.a)(U.a.mark((function e(t){var n,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(z()).concat("getnodes"),console.log("getNodes url",n),e.next=4,fetch(n,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){e.status;return e.json()})).then((function(e){return e})).catch((function(e){console.log("getNodes error",e)}));case 4:a=e.sent,console.log("getNodes",a),t(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(q.a)(U.a.mark((function e(t,n){var a,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendChallenge",t),a="".concat(z()).concat("issue","?counterParty=").concat(t.counterParty,"&escrowParty=").concat(t.escrow,"&choice=").concat(t.choice),e.next=4,fetch(a,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){e.status;return e.json()})).then((function(e){return e})).catch((function(e){console.log("sendChallenge error",e)}));case 4:c=e.sent,console.log("sendChallenge",c),n(c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(q.a)(U.a.mark((function e(t,n){var a,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendAcceptChallenge",t),a="".concat(z()).concat("accept","?linearId=").concat(t.linearId,"&choice=").concat(t.choice,"&escrowParty=").concat(t.escrow,"&challenged=").concat(t.challenged),e.next=4,fetch(a,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){e.status;return e.json()})).then((function(e){return e})).catch((function(e){console.log("sendAcceptChallenge error",e)}));case 4:c=e.sent,console.log("sendAcceptChallenge",c),n(c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(q.a)(U.a.mark((function e(t){var n,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(z()).concat("gettransactions"),console.log("getTransactions url",n),e.next=4,fetch(n,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){e.status;return e.json()})).then((function(e){return e})).catch((function(e){console.log("getTransactions error",e)}));case 4:a=e.sent,console.log("getTransactions",a),t(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(q.a)(U.a.mark((function e(t,n){var a,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(z()).concat("getstatesbylinearid","?linearId=").concat(t.id),console.log("getTransactionDetails url",a),e.next=4,fetch(a,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){e.status;return e.json()})).then((function(e){return e})).catch((function(e){console.log("getTransactionDetails error",e)}));case 4:c=e.sent,console.log("getTransactionDetails",c),n(c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=Object(j.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));var _=function(e){var t=e.onTransactionSelected,n=(Object(d.a)(e,["onTransactionSelected"]),$()),c=o.a.useState([]),r=Object(i.a)(c,2),s=r[0],l=r[1];return o.a.useEffect((function(){X((function(e){console.log("transactions",e),l(e)}))}),[]),Object(a.jsx)(F.a,{className:n.root,children:s&&s.map((function(e,n){return Object(a.jsxs)(P.a,{onClick:function(){return t(e)},style:{cursor:"pointer"},children:[Object(a.jsx)(R.a,{children:Object(a.jsxs)(D.a,{children:["com.axa.RockPaperScissorsIssuedState"==e.class&&Object(a.jsx)(J.a,{}),"com.axa.RockPaperScissorsChallengeState"==e.status&&Object(a.jsx)(H.a,{}),"com.axa.RockPaperScissorsAcceptedState"==e.status&&Object(a.jsx)(H.a,{}),"com.axa.RockPaperScissorsSettledState"==e.status&&Object(a.jsx)(W.a,{})]})}),Object(a.jsx)(G.a,{primary:e.id,secondary:e.class})]})}))})},ee=n(65),te=n.n(ee),ne=Object(j.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));var ae=function(e){var t=e.onNodeSelected,n=(Object(d.a)(e,["onNodeSelected"]),ne()),c=o.a.useState(""),r=Object(i.a)(c,2),s=r[0],l=r[1];return o.a.useEffect((function(){K((function(e){console.log("NodeExplorer",e);for(var t=0;t<e.length;t++)e[t].name=e[t].identities[0].name.organisation,e[t].address=e[t].addresses[0];l(e)}))}),[]),Object(a.jsx)(F.a,{className:n.root,children:s&&s.map((function(e,n){return Object(a.jsxs)(P.a,{onClick:function(){return t(e)},style:{cursor:"pointer"},children:[Object(a.jsx)(R.a,{children:Object(a.jsxs)(D.a,{children:["Notary"!=e.name&&Object(a.jsx)(te.a,{}),"Notary"==e.name&&Object(a.jsx)(W.a,{})]})}),Object(a.jsx)(G.a,{primary:e.name,secondary:e.address})]})}))})},ce=(n(85),n(39)),oe=n.n(ce);var re=function(e){var t=e.node;return Object(d.a)(e,["node"]),Object(a.jsx)("div",{style:{textAlign:"left"},children:Object(a.jsx)(oe.a,{src:t})})},se=n(267),ie=n(251),le=n(252),de=n(250),ue=n(260),je=Object(j.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:"90%"},selectEmpty:{marginTop:e.spacing(2)}}}));function be(e){var t=e.onChange,n=(Object(d.a)(e,["onChange"]),je()),c=o.a.useState(""),r=Object(i.a)(c,2),s=r[0],l=r[1],u=o.a.useState(""),j=Object(i.a)(u,2),b=j[0],h=j[1],p=o.a.useState(""),f=Object(i.a)(p,2),m=f[0],g=f[1],x=o.a.useState(""),O=Object(i.a)(x,2),v=O[0],y=O[1],S=o.a.useState(""),C=Object(i.a)(S,2),w=C[0],N=C[1];return o.a.useEffect((function(){K((function(e){console.log("Gameboard",e);for(var t=0;t<e.length;t++)e[t].name=e[t].identities[0].name.organisation;y(e)}))}),[]),o.a.useEffect((function(){var e=!1;if(m&&b&&s)if(b===s)N("Escrow and counterparty cannot be the same party");else{var n=v.find((function(e){return e.isCurrentNode}));n.name===b?N("Counterparty and current node cannot be the same node"):n.name===s?N("Escrow and current node cannot be the same node"):"Notary"===b||"Notary"===s?N("Notary cannot be a signing party"):(N(!1),e=!0)}t&&t({ready:e,escrow:s,counterParty:b,choice:m})}),[b,s,m]),Object(a.jsxs)("div",{children:[Object(a.jsxs)(de.a,{className:n.formControl,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Choice"}),Object(a.jsxs)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:m,onChange:function(e){g(e.target.value)},children:[Object(a.jsx)(ie.a,{value:"rock",children:"Rock"}),Object(a.jsx)(ie.a,{value:"paper",children:"Paper"}),Object(a.jsx)(ie.a,{value:"scissors",children:"Scissors"})]})]}),Object(a.jsxs)(de.a,{className:n.formControl,error:w,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Escrow"}),Object(a.jsx)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:s,onChange:function(e){l(e.target.value)},children:v&&v.map((function(e){return Object(a.jsx)(ie.a,{value:e.name,children:e.name})}))})]}),Object(a.jsxs)(de.a,{className:n.formControl,error:w,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Counter Party"}),Object(a.jsx)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:b,onChange:function(e){h(e.target.value)},children:v&&v.map((function(e){return Object(a.jsx)(ie.a,{value:e.name,children:e.name})}))})]}),Object(a.jsx)(le.a,{style:{display:w?"":"none"},children:w})]})}var he=n(268),pe=n(254),fe=n(264),me=n(269),ge=n(253),xe=Object(j.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)},formControl:{margin:e.spacing(1),minWidth:"90%"},selectEmpty:{marginTop:e.spacing(2)}}}));var Oe=function(e){var t=e.transaction,n=(Object(d.a)(e,["transaction"]),o.a.useState([])),c=Object(i.a)(n,2),r=c[0],s=c[1],l=o.a.useState(""),u=Object(i.a)(l,2),j=u[0],b=u[1];o.a.useEffect((function(){Z(t,(function(e){console.log(e),s(e)}))}),[]);var h=xe(),p=o.a.useState(0),f=Object(i.a)(p,2),m=f[0],g=f[1],x=["Issued State","Challenge State","Accepted State","Settled State"],O=function(e){b(e.target.value)},v=function(){r.ChallengeState.choice=j,V(r.ChallengeState,(function(){Z(t,(function(e){s(e)}))}))};function y(e,t){var n=Object(a.jsx)(a.Fragment,{});switch(e){case 0:return n=Object(a.jsx)(a.Fragment,{children:"There is no Issued State"}),t&&(n=t.ChallengeState&&t.ChallengeState.challenged.name==t.currentNode.name?Object(a.jsx)(a.Fragment,{children:"You are the counter party and not a signatory to this state. Your vault only contains states of which you are a signatory"}):Object(a.jsx)(oe.a,{src:t.IssuedState,collapsed:!0})),Object(a.jsx)("div",{children:n});case 1:return n=Object(a.jsx)(a.Fragment,{children:"There is no Challenge State"}),t&&(t.IssuedState&&t.IssuedState.challenger.name==t.currentNode.name?n=Object(a.jsx)(a.Fragment,{children:"You are the challenger and not a signatory to this state. Your vault only contains states of which you are a signatory"}):t.ChallengeState&&(n=Object(a.jsx)(oe.a,{src:t.ChallengeState,collapsed:!0}))),Object(a.jsx)("div",{children:n});case 2:return n=Object(a.jsx)(a.Fragment,{children:"There is no Accepted State"}),t&&(t.IssuedState&&t.IssuedState.escrow.name==t.currentNode.name?n=Object(a.jsx)(a.Fragment,{children:"You are the escrow party and not a signatory to this state. Your vault only contains states of which you are a signatory"}):t.AcceptedState?n=Object(a.jsx)(oe.a,{src:t.AcceptedState,collapsed:!0}):t.ChallengeState&&t.ChallengeState.challenged.name==t.currentNode.name&&(n=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(de.a,{className:h.formControl,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Choice"}),Object(a.jsxs)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:j,onChange:O,children:[Object(a.jsx)(ie.a,{value:"rock",children:"Rock"}),Object(a.jsx)(ie.a,{value:"paper",children:"Paper"}),Object(a.jsx)(ie.a,{value:"scissors",children:"Scissors"})]})]}),Object(a.jsx)(ge.a,{variant:"contained",color:"primary",className:h.button,onClick:v,disabled:""==j,children:"Accept"})]}))),Object(a.jsx)("div",{children:n});case 3:return n=Object(a.jsx)(a.Fragment,{children:"There is no Settled State"}),t&&t.SettledState&&(n=Object(a.jsx)(oe.a,{src:t.SettledState,collapsed:!0})),Object(a.jsx)("div",{children:n});default:return"Unknown step"}}return Object(a.jsx)("div",{className:h.root,style:{textAlign:"left"},children:Object(a.jsx)(he.a,{activeStep:m,orientation:"vertical",children:x.map((function(e,t){return Object(a.jsxs)(pe.a,{children:[Object(a.jsx)(fe.a,{onClick:function(){return g(t)},children:e}),Object(a.jsx)(me.a,{children:Object(a.jsx)(E.a,{children:y(t,r)})})]},e)}))})})},ve=(n(255),n(265),n(68));Object(j.a)({avatar:{backgroundColor:ve.a[100],color:ve.a[600]}});function ye(e){var t=e.children,n=e.value,c=e.index,o=Object(d.a)(e,["children","value","index"]);return Object(a.jsx)(E.a,Object(l.a)(Object(l.a)({component:"div",role:"tabpanel",hidden:n!==c,id:"action-tabpanel-".concat(c),"aria-labelledby":"action-tab-".concat(c)},o),{},{children:n===c&&Object(a.jsx)(T.a,{p:3,children:t})}))}var Se=Object(j.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:500,position:"relative",minHeight:200},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)},fabGreen:{color:e.palette.common.white,backgroundColor:k.a[500],"&:hover":{backgroundColor:k.a[600]}}}}));function Ce(e){return{id:"action-tab-".concat(e),"aria-controls":"action-tabpanel-".concat(e)}}var we=function(){var e=o.a.useState(0),t=Object(i.a)(e,2),n=t[0],c=t[1],r=o.a.useState(!1),s=Object(i.a)(r,2),d=s[0],j=s[1],p=o.a.useState({}),m=Object(i.a)(p,2),x=m[0],v=m[1],k=o.a.useState({}),T=Object(i.a)(k,2),E=T[0],A=T[1],F=o.a.useState({}),P=Object(i.a)(F,2),G=P[0],R=P[1],D=o.a.useState(!1),Y=Object(i.a)(D,2),W=(Y[0],Y[1],function(){c(3)});o.a.useEffect((function(){console.log("value",n),2!=n&&(A(null),R(null))}),[n]);var B=Se(),J=Object(b.a)(),L={enter:J.transitions.duration.enteringScreen,exit:J.transitions.duration.leavingScreen},H=[{color:"primary",className:B.fab,icon:Object(a.jsx)(f.a,{}),label:"Add",action:W,color2:"secondary",display2:"none"},{color:"primary",className:B.fab,icon:Object(a.jsx)(f.a,{}),label:"Add",action:W,color2:"secondary",display2:"none"},{color:"inherit",className:Object(u.a)(B.fab,B.fabGreen),icon:Object(a.jsx)(I.a,{}),label:"Expand",display:"none",display2:"none"},{color:"primary",className:Object(u.a)(B.fab,B.fabGreen),disabled:!d,icon:Object(a.jsx)(g.a,{}),icon2:Object(a.jsx)(O.a,{}),label:"Edit",action:function(){Q(x,(function(e){console.log("challenge issued",e),c(0)}))},className2:Object(u.a)(B.fab),color2:"secondary",action2:function(){c(0)}}];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(C.a,{position:"static",color:"default",children:Object(a.jsxs)(w.a,{value:n,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"action tabs example",children:[Object(a.jsx)(N.a,Object(l.a)({label:"Transactions"},Ce(0))),Object(a.jsx)(N.a,Object(l.a)({label:"Nodes"},Ce(1))),Object(a.jsx)(N.a,Object(l.a)({label:E?E.name:G?G.challengerChoice:""},Ce(2)))]})}),Object(a.jsxs)(y.a,{axis:"rtl"===J.direction?"x-reverse":"x",index:n,onChangeIndex:function(e){c(e)},children:[Object(a.jsx)(ye,{value:n,index:0,dir:J.direction,children:Object(a.jsx)(_,{onTransactionSelected:function(e){R(e),c(2)}})}),Object(a.jsx)(ye,{value:n,index:1,dir:J.direction,children:Object(a.jsx)(ae,{onNodeSelected:function(e){A(e),c(2)}})}),Object(a.jsxs)(ye,{value:n,index:2,dir:J.direction,children:[E&&Object(a.jsx)(re,{node:E}),G&&Object(a.jsx)(Oe,{transaction:G})]}),Object(a.jsx)(ye,{value:n,index:3,dir:J.direction,children:Object(a.jsx)(be,{onChange:function(e){j(e.ready),v(e)}})})]}),H.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S.a,{in:n===t,timeout:L,style:{transitionDelay:"".concat(n===t?L.exit:0,"ms")},unmountOnExit:!0,children:Object(a.jsx)(h.a,{"aria-label":e.label,className:e.className,color:e.color,style:{display:e.display},disabled:e.disabled,onClick:e.action,children:e.icon})},e.color),Object(a.jsx)(S.a,{in:n===t,timeout:L,style:{transitionDelay:"".concat(n===t?L.exit:0,"ms")},unmountOnExit:!0,children:Object(a.jsx)(h.a,{"aria-label":e.label,className:e.className2,color:e.color2,style:{display:e.display2,right:"80px"},onClick:e.action2,children:e.icon2})},e.color)]})}))]})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,271)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(we,{})}),document.getElementById("root")),Ne()}},[[198,1,2]]]);
//# sourceMappingURL=main.84a2688a.chunk.js.map