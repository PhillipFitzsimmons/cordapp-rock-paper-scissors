(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),o=n(11),s=n.n(o),i=(n(120),n(12)),l=n(48),d=n(22),u=(n.p,n(4)),j=(n(121),n(248)),h=n(16),b=n(264),p=n(69),f=n.n(p),m=n(95),g=n.n(m),x=n(96),O=n.n(x),v=n(93),S=n.n(v),y=n(263),C=n(261),w=n(268),E=n(262),N=n(71),k=n(267),T=n(57),A=n(94),P=n.n(A),I=n(250),F=n(205),R=n(253),G=n(252),D=n(273),Y=n(35),W=n.n(Y),B=n(61),z=n.n(B),J=n(53),L=n.n(J),H=n(23),M=n.n(H),U=n(47);function q(){return console.log("getServer",window.location.href),window.location.href.indexOf("3000")>-1?"http://localhost:10050/":(console.log("getServer returning",window.location.href),window.location.href)}var K=function(){var e=Object(U.a)(M.a.mark((function e(t){var n,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(q()).concat("getnodes"),console.log("getNodes url",n),e.next=4,fetch(n,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){e.status;return e.json()})).then((function(e){return{response:e}})).catch((function(e){return console.log("getNodes error",e),{error:'"'.concat(e,'"')}}));case 4:a=e.sent,console.log("getNodes",a),t(a.error,a.response);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(U.a)(M.a.mark((function e(t,n){var a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendChallenge",t),a="".concat(q()).concat("issue","?counterParty=").concat(t.counterParty,"&escrowParty=").concat(t.escrow,"&choice=").concat(t.choice),e.next=4,fetch(a,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return{response:e}})).catch((function(e){return console.log("sendChallenge error",e),{error:'"'.concat(e,'"')}}));case 4:c=e.sent,console.log("sendChallenge",c),n(c.error,c.response);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(U.a)(M.a.mark((function e(t,n){var a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendAcceptChallenge",t),a="".concat(q()).concat("accept","?linearId=").concat(t.linearId,"&choice=").concat(t.choice,"&escrowParty=").concat(t.escrow.name,"&challenged=").concat(t.challenged.name),console.log("sendAcceptChallenge",a),e.next=5,fetch(a,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return{response:e}})).catch((function(e){return console.log("sendAcceptChallenge error",e),{error:'"'.concat(e,'"')}}));case 5:c=e.sent,console.log("sendAcceptChallenge",c),n(c.error,c.response);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(U.a)(M.a.mark((function e(t){var n,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(q()).concat("gettransactions"),console.log("getTransactions url",n),e.next=4,fetch(n,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return{response:e}})).catch((function(e){return console.log("getTransactions error",e),{error:'"'.concat(e,'"')}}));case 4:a=e.sent,console.log("getTransactions",a),t(a.error,a.response);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(U.a)(M.a.mark((function e(t,n){var a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(q()).concat("getstatesbylinearid","?linearId=").concat(t.id),console.log("getTransactionDetails url",a),e.next=4,fetch(a,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return{response:e}})).catch((function(e){return console.log("getTransactionDetails error",e),{error:'"'.concat(e,'"')}}));case 4:c=e.sent,console.log("getTransactionDetails",c),n(c.error,c.response);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=Object(j.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));var _=function(e){var t=e.onTransactionSelected,n=e.onError,c=(Object(d.a)(e,["onTransactionSelected","onError"]),$()),o=r.a.useState([]),s=Object(i.a)(o,2),l=s[0],u=s[1];return r.a.useEffect((function(){X((function(e,t){if(console.log("transactions",e,t),e)n(e);else{var a=t.sort((function(e,t){return t.recordedTime-e.recordedTime}));a=a.filter((function(e){return e.recordedTime==t.find((function(t){return t.id==e.id})).recordedTime})),console.log("transactions after filtering",a),u(a)}}))}),[]),Object(a.jsx)(I.a,{className:c.root,children:l&&l.map((function(e,n){return Object(a.jsxs)(F.a,{onClick:function(){return t(e)},style:{cursor:"pointer"},children:[Object(a.jsx)(G.a,{children:Object(a.jsxs)(D.a,{children:["com.axa.RockPaperScissorsIssuedState"==e.class&&Object(a.jsx)(z.a,{}),"com.axa.RockPaperScissorsChallengeState"==e.status&&Object(a.jsx)(L.a,{}),"com.axa.RockPaperScissorsAcceptedState"==e.status&&Object(a.jsx)(L.a,{}),"com.axa.RockPaperScissorsSettledState"==e.status&&Object(a.jsx)(W.a,{})]})}),Object(a.jsx)(R.a,{primary:e.id,secondary:e.class})]})}))})},ee=n(67),te=n.n(ee),ne=Object(j.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));var ae=function(e){var t=e.onNodeSelected,n=e.onError,c=(Object(d.a)(e,["onNodeSelected","onError"]),ne()),o=r.a.useState(""),s=Object(i.a)(o,2),l=s[0],u=s[1];return r.a.useEffect((function(){K((function(e,t){if(e)n(e);else{console.log("NodeExplorer",t);for(var a=0;a<t.length;a++)t[a].name=t[a].identities[0].name.organisation,t[a].address=t[a].addresses[0];u(t)}}))}),[]),Object(a.jsx)(I.a,{className:c.root,children:l&&l.map((function(e,n){return Object(a.jsxs)(F.a,{onClick:function(){return t(e)},style:{cursor:"pointer"},children:[Object(a.jsx)(G.a,{children:Object(a.jsxs)(D.a,{children:["Notary"!=e.name&&Object(a.jsx)(te.a,{}),"Notary"==e.name&&Object(a.jsx)(W.a,{})]})}),Object(a.jsx)(R.a,{primary:e.name,secondary:e.address})]})}))})},ce=(n(87),n(39)),re=n.n(ce);var oe=function(e){var t=e.node;return Object(d.a)(e,["node"]),Object(a.jsx)("div",{style:{textAlign:"left"},children:Object(a.jsx)(re.a,{src:t})})},se=n(274),ie=n(255),le=n(256),de=n(254),ue=n(266),je=Object(j.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:"90%"},selectEmpty:{marginTop:e.spacing(2)}}}));function he(e){var t=e.onChange,n=e.onError,c=(Object(d.a)(e,["onChange","onError"]),je()),o=r.a.useState(""),s=Object(i.a)(o,2),l=s[0],u=s[1],j=r.a.useState(""),h=Object(i.a)(j,2),b=h[0],p=h[1],f=r.a.useState(""),m=Object(i.a)(f,2),g=m[0],x=m[1],O=r.a.useState(""),v=Object(i.a)(O,2),S=v[0],y=v[1],C=r.a.useState(""),w=Object(i.a)(C,2),E=w[0],N=w[1];return r.a.useEffect((function(){K((function(e,t){if(console.log("Gameboard",t),e)n(e);else{for(var a=0;a<t.length;a++)t[a].name=t[a].identities[0].name.organisation;y(t)}}))}),[]),r.a.useEffect((function(){var e=!1;if(g&&b&&l)if(b===l)N("Escrow and counterparty cannot be the same party");else{var n=S.find((function(e){return e.isCurrentNode}));n.name===b?N("Counterparty and current node cannot be the same node"):n.name===l?N("Escrow and current node cannot be the same node"):"Notary"===b||"Notary"===l?N("Notary cannot be a signing party"):(N(!1),e=!0)}t&&t({ready:e,escrow:l,counterParty:b,choice:g})}),[b,l,g]),Object(a.jsxs)("div",{children:[Object(a.jsxs)(de.a,{className:c.formControl,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Choice"}),Object(a.jsxs)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:g,onChange:function(e){x(e.target.value)},children:[Object(a.jsx)(ie.a,{value:"rock",children:"Rock"}),Object(a.jsx)(ie.a,{value:"paper",children:"Paper"}),Object(a.jsx)(ie.a,{value:"scissors",children:"Scissors"})]})]}),Object(a.jsxs)(de.a,{className:c.formControl,error:E,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Escrow"}),Object(a.jsx)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l,onChange:function(e){u(e.target.value)},children:S&&S.map((function(e){return Object(a.jsx)(ie.a,{value:e.name,children:e.name})}))})]}),Object(a.jsxs)(de.a,{className:c.formControl,error:E,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Counter Party"}),Object(a.jsx)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:b,onChange:function(e){p(e.target.value)},children:S&&S.map((function(e){return Object(a.jsx)(ie.a,{value:e.name,children:e.name})}))})]}),Object(a.jsx)(le.a,{style:{display:E?"":"none"},children:E})]})}var be=n(275),pe=n(258),fe=n(271),me=n(259),ge=n(257),xe=Object(j.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)},formControl:{margin:e.spacing(1),minWidth:"90%"},selectEmpty:{marginTop:e.spacing(2)}}}));var Oe=function(e){var t=e.transaction,n=e.onError,c=(Object(d.a)(e,["transaction","onError"]),r.a.useState([])),o=Object(i.a)(c,2),s=o[0],l=o[1],u=r.a.useState(""),j=Object(i.a)(u,2),h=j[0],b=j[1];r.a.useEffect((function(){Z(t,(function(e,t){e?n(e):(console.log("transactionDetails",t),l(t))}))}),[]);var p=xe(),f=r.a.useState(0),m=Object(i.a)(f,2),g=m[0],x=m[1],O=["Issued State","Challenge State","Accepted State","Settled State"],v=function(e){b(e.target.value)},S=function(){s.ChallengeState.choice=h,V(s.ChallengeState,(function(){Z(t,(function(e,t){l(t)}))}))};function y(e,t){var n=Object(a.jsx)(a.Fragment,{});switch(e){case 0:return n=Object(a.jsx)(a.Fragment,{children:"There is no Issued State"}),t&&(n=t.ChallengeState&&t.ChallengeState.challenged.name==t.currentNode.name?Object(a.jsx)(a.Fragment,{children:"You are the counter party and not a signatory to this state. Your vault only contains states of which you are a signatory"}):Object(a.jsx)(re.a,{src:t.IssuedState,collapsed:!0})),Object(a.jsx)("div",{children:n});case 1:return n=Object(a.jsx)(a.Fragment,{children:"There is no Challenge State"}),t&&(t.IssuedState&&t.IssuedState.challenger.name==t.currentNode.name?n=Object(a.jsx)(a.Fragment,{children:"You are the challenger and not a signatory to this state. Your vault only contains states of which you are a signatory"}):t.ChallengeState&&(n=Object(a.jsx)(re.a,{src:t.ChallengeState,collapsed:!0}))),Object(a.jsx)("div",{children:n});case 2:return n=Object(a.jsx)(a.Fragment,{children:"There is no Accepted State - the challenge hasn't been accepted."}),t&&(t.SettledState&&t.SettledState.challenger.name==t.currentNode.name?n=Object(a.jsx)(a.Fragment,{children:"You are the challenger and not a signatory to this state. Your vault only contains states of which you are a signatory"}):t.SettledState&&t.SettledState.escrow.name==t.currentNode.name?n=Object(a.jsx)(a.Fragment,{children:"You are the escrow and should see this. This is a bug."}):t.AcceptedState?n=Object(a.jsx)(re.a,{src:t.AcceptedState,collapsed:!0}):t.ChallengeState&&t.ChallengeState.challenged.name==t.currentNode.name&&(n=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(de.a,{className:p.formControl,children:[Object(a.jsx)(se.a,{id:"demo-simple-select-label",children:"Choice"}),Object(a.jsxs)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:h,onChange:v,children:[Object(a.jsx)(ie.a,{value:"rock",children:"Rock"}),Object(a.jsx)(ie.a,{value:"paper",children:"Paper"}),Object(a.jsx)(ie.a,{value:"scissors",children:"Scissors"})]})]}),Object(a.jsx)(ge.a,{variant:"contained",color:"primary",className:p.button,onClick:S,disabled:""==h,children:"Accept"})]}))),Object(a.jsx)("div",{children:n});case 3:return n=Object(a.jsx)(a.Fragment,{children:"There is no Settled State"}),t&&t.SettledState&&(n=Object(a.jsx)(re.a,{src:t.SettledState,collapsed:!0})),Object(a.jsx)("div",{children:n});default:return"Unknown step"}}return Object(a.jsx)("div",{className:p.root,style:{textAlign:"left"},children:Object(a.jsx)(be.a,{activeStep:g,orientation:"vertical",children:O.map((function(e,t){return Object(a.jsxs)(pe.a,{children:[Object(a.jsx)(fe.a,{onClick:function(){return x(t)},children:e}),Object(a.jsx)(me.a,{children:Object(a.jsx)(T.a,{children:y(t,s)})})]},e)}))})})},ve=(n(260),n(272),n(70));Object(j.a)({avatar:{backgroundColor:ve.a[100],color:ve.a[600]}});var Se=n(269),ye=n(265),Ce=n(207),we=n(97),Ee=n.n(we);function Ne(e){var t=e.children,n=e.value,c=e.index,r=Object(d.a)(e,["children","value","index"]);return Object(a.jsx)(T.a,Object(l.a)(Object(l.a)({component:"div",role:"tabpanel",hidden:n!==c,id:"action-tabpanel-".concat(c),"aria-labelledby":"action-tab-".concat(c)},r),{},{children:n===c&&Object(a.jsx)(k.a,{p:3,children:t})}))}var ke=Object(j.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:500,position:"relative",minHeight:200},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)},fabGreen:{color:e.palette.common.white,backgroundColor:N.a[500],"&:hover":{backgroundColor:N.a[600]}}}}));function Te(e){return{id:"action-tab-".concat(e),"aria-controls":"action-tabpanel-".concat(e)}}var Ae=function(){var e=r.a.useState(0),t=Object(i.a)(e,2),n=t[0],c=t[1],o=r.a.useState(!1),s=Object(i.a)(o,2),d=s[0],j=s[1],p=r.a.useState({}),m=Object(i.a)(p,2),x=m[0],v=m[1],N=r.a.useState({}),k=Object(i.a)(N,2),T=k[0],A=k[1],I=r.a.useState({}),F=Object(i.a)(I,2),R=F[0],G=F[1],D=r.a.useState(!1),Y=Object(i.a)(D,2),W=(Y[0],Y[1],r.a.useState(!1)),B=Object(i.a)(W,2),z=B[0],J=B[1],L=r.a.useState(""),H=Object(i.a)(L,2),M=H[0],U=H[1],q=function(){c(3)};r.a.useEffect((function(){2!=n&&(A(null),G(null))}),[n]),r.a.useEffect((function(){""!=M&&J(!0)}),[M]),r.a.useEffect((function(){z||U("")}),[z]);var K=ke(),V=Object(h.a)(),X={enter:V.transitions.duration.enteringScreen,exit:V.transitions.duration.leavingScreen},Z=[{color:"primary",className:K.fab,icon:Object(a.jsx)(f.a,{}),label:"Add",action:q,color2:"secondary",display2:"none"},{color:"primary",className:K.fab,icon:Object(a.jsx)(f.a,{}),label:"Add",action:q,color2:"secondary",display2:"none"},{color:"inherit",className:Object(u.a)(K.fab,K.fabGreen),icon:Object(a.jsx)(P.a,{}),label:"Expand",display:"none",display2:"none"},{color:"primary",className:Object(u.a)(K.fab,K.fabGreen),disabled:!d,icon:Object(a.jsx)(g.a,{}),icon2:Object(a.jsx)(O.a,{}),label:"Edit",action:function(){Q(x,(function(e,t){console.log("challenge issued",t),e&&U(e),c(0)}))},className2:Object(u.a)(K.fab),color2:"secondary",action2:function(){c(0)}}];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(C.a,{position:"static",color:"default",children:Object(a.jsxs)(w.a,{value:n,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"action tabs example",children:[Object(a.jsx)(E.a,Object(l.a)({label:"Transactions"},Te(0))),Object(a.jsx)(E.a,Object(l.a)({label:"Nodes"},Te(1))),Object(a.jsx)(E.a,Object(l.a)({label:function(){if(R){if(R.class="com.axa.RockPaperScissorsSettledState")return"settled";if(R.class="com.axa.RockPaperScissorsChallengeState")return"issued";if(R.class="com.axa.RockPaperScissorsAcceptedState")return"accepted"}return""}()},Te(2)))]})}),Object(a.jsxs)(S.a,{axis:"rtl"===V.direction?"x-reverse":"x",index:n,onChangeIndex:function(e){c(e)},children:[Object(a.jsx)(Ne,{value:n,index:0,dir:V.direction,children:Object(a.jsx)(_,{onTransactionSelected:function(e){G(e),c(2)},onError:U})}),Object(a.jsx)(Ne,{value:n,index:1,dir:V.direction,children:Object(a.jsx)(ae,{onNodeSelected:function(e){A(e),c(2)},onError:U})}),Object(a.jsxs)(Ne,{value:n,index:2,dir:V.direction,children:[T&&Object(a.jsx)(oe,{node:T,onError:U}),R&&Object(a.jsx)(Oe,{transaction:R,onError:U})]}),Object(a.jsx)(Ne,{value:n,index:3,dir:V.direction,children:Object(a.jsx)(he,{onChange:function(e){j(e.ready),v(e)},onError:U})})]}),Z.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.a,{in:n===t,timeout:X,style:{transitionDelay:"".concat(n===t?X.exit:0,"ms")},unmountOnExit:!0,children:Object(a.jsx)(b.a,{"aria-label":e.label,className:e.className,color:e.color,style:{display:e.display},disabled:e.disabled,onClick:e.action,children:e.icon})},e.color),Object(a.jsx)(y.a,{in:n===t,timeout:X,style:{transitionDelay:"".concat(n===t?X.exit:0,"ms")},unmountOnExit:!0,children:Object(a.jsx)(b.a,{"aria-label":e.label,className:e.className2,color:e.color2,style:{display:e.display2,right:"80px"},onClick:e.action2,children:e.icon2})},e.color)]})})),Object(a.jsx)(Ce.a,{in:z,children:Object(a.jsx)(Se.a,{severity:"error",action:Object(a.jsx)(ye.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){J(!1)},children:Object(a.jsx)(Ee.a,{fontSize:"inherit"})}),children:Object(a.jsx)("div",{children:M})})})]})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Ae,{})}),document.getElementById("root")),Pe()}},[[203,1,2]]]);
//# sourceMappingURL=main.1c802dc9.chunk.js.map